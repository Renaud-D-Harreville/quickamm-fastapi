{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "description": "An example of Cartesian layouts for a node-link diagram of hierarchical data.",
  "width": 1200,
  "height": 800,
  "padding": 15,
  "signals": [
    {
      "name": "labels",
      "value": true,
      "bind": {
        "input": "checkbox"
      }
    },
    {
      "name": "layout",
      "value": "cluster",
      "bind": {
        "input": "radio",
        "options": [
          "cluster",
          "tidy"
        ]
      }
    },
    {
      "name": "links",
      "value": "line",
      "bind": {
        "input": "select",
        "options": [
          "line",
          "curve",
          "diagonal",
          "orthogonal"
        ]
      }
    },
    {
      "name": "separation",
      "value": true,
      "bind": {
        "input": "checkbox"
      }
    }
  ],
  "data": [
    {
      "name": "tree",
      "values": [
        {
          "id": "Animalia",
          "name": "Animaux",
          "taxon": "Règne",
          "classificationDepth": 0,
          "parent": null
        },
        {
          "id": "Chordata",
          "name": "Chordés",
          "taxon": "Embranchement",
          "classificationDepth": 1,
          "parent": "Animalia"
        },
        {
          "id": "Vertebrata",
          "name": "Vertébrés",
          "taxon": "Sous-embranchement",
          "classificationDepth": 2,
          "parent": "Chordata"
        },
        {
          "id": "Mammalia",
          "name": "Mammifères",
          "taxon": "Classe",
          "classificationDepth": 3,
          "parent": "Vertebrata"
        },
        {
          "id": "Aves",
          "name": "Oiseaux",
          "taxon": "Classe",
          "classificationDepth": 3,
          "parent": "Vertebrata"
        },
        {
          "id": "Artiodactyla",
          "name": "Artiodactyles",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Mammalia"
        },
        {
          "id": "Ruminantia",
          "name": "Ruminants",
          "taxon": "Sous-ordre",
          "classificationDepth": 5,
          "parent": "Artiodactyla"
        },
        {
          "id": "Bovidae",
          "name": "Bovidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Ruminantia"
        },
        {
          "id": "Caprinae",
          "name": "Caprinés",
          "taxon": "Sous-famille",
          "classificationDepth": 7,
          "parent": "Bovidae"
        },
        {
          "id": "Rupicapra",
          "name": "Chamois / Isard",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Caprinae"
        },
        {
          "id": "Capra ibex",
          "name": "Bouquetin des Alpes",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Caprinae"
        },
        {
          "id": "Cervidae",
          "name": "Cervidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Ruminantia"
        },
        {
          "id": "Cervus Elaphus",
          "name": "Cerf élaphe",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Cervidae"
        },
        {
          "id": "Capreolus capreolus",
          "name": "Chevreuil",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Cervidae"
        },
        {
          "id": "Capreolus capreolus",
          "name": "Mouflon",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Caprinae"
        },
        {
          "id": "Sus scrofa",
          "name": "Sanglier",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Suidae"
        },
        {
          "id": "Rodentia",
          "name": "Rongeurs",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Mammalia"
        },
        {
          "id": "Sciuridae",
          "name": "Sciuridés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Rodentia"
        },
        {
          "id": "Marmota",
          "name": "Marmotte",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Sciuridae"
        },
        {
          "id": "Lagomorpha",
          "name": "Lagomorphe",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Mammalia"
        },
        {
          "id": "Lepus timidus",
          "name": "Lièvre variable",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Lagomorpha"
        },
        {
          "id": "Ecureuil",
          "name": "Écureuil",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Sciuridae"
        },
        {
          "id": "Carnivora",
          "name": "Carnivores",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Mammalia"
        },
        {
          "id": "Mustelidae",
          "name": "Mustelidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Carnivora"
        },
        {
          "id": "Mustela erminea",
          "name": "Hermine",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Mustelidae"
        },
        {
          "id": "Canidae",
          "name": "Canidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Carnivora"
        },
        {
          "id": "Vulpes vulpes",
          "name": "Renard roux",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Canidae"
        },
        {
          "id": "Canis lupus",
          "name": "Loup gris",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Canidae"
        },
        {
          "id": "Ursidae",
          "name": "Ursidé",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Carnivora"
        },
        {
          "id": "Ursus arctos",
          "name": "Ours brun",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Ursidae"
        },
        {
          "id": "Felidae",
          "name": "Félidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Carnivora"
        },
        {
          "id": "Felinae",
          "name": "Félins",
          "taxon": "Sous-famille",
          "classificationDepth": 7,
          "parent": "Felidae"
        },
        {
          "id": "Lynx lynx",
          "name": "Lynx boréal",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Felinae"
        },
        {
          "id": "Accipitridae",
          "name": "Accipitridés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Aves"
        },
        {
          "id": "Aquila chrysaetos",
          "name": "Aigle royal",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Accipitridae"
        },
        {
          "id": "Gypaetus",
          "name": "Gypaète barbu",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Accipitridae"
        },
        {
          "id": "Strigidae",
          "name": "Strigidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Aves"
        },
        {
          "id": "Corvidae",
          "name": "Corvidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Aves"
        },
        {
          "id": "Bubo bubo",
          "name": "Hibou grand duc",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Strigidae"
        },
        {
          "id": "Strix aluco",
          "name": "Chouette hulotte",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Strigidae"
        },
        {
          "id": "Strix aluco",
          "name": "Chouette hulotte",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Strigidae"
        },
        {
          "id": "Strix aluco",
          "name": "Chouette hulotte",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Strigidae"
        },
        {
          "id": "Tetrao urogallus",
          "name": "Grand Tétras",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Phasianidae"
        },
        {
          "id": "Galliformes",
          "name": "gallinacés",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Aves"
        },
        {
          "id": "Perdix perdix",
          "name": "Perdrix grise",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Phasianidae"
        },
        {
          "id": "Phasianidae",
          "name": "phasianidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Galliformes"
        },
        {
          "id": "Lagopus muta",
          "name": "Lagopède alpin",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Phasianidae"
        },
        {
          "id": "Pyrrhocorax graculus",
          "name": "Chocard à bec jaune",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Corvus"
        },
        {
          "id": "Corvus",
          "name": "Corbeaux",
          "taxon": "Genre",
          "classificationDepth": 8,
          "parent": "Corvidae"
        },
        {
          "id": "Suidae",
          "name": "Porcins",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Artiodactyla"
        },
        {
          "id": "Eulipotyphla",
          "name": "Eulipotyphles",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Mammalia"
        },
        {
          "id": "Erinaceidae",
          "name": "Érinacéidés",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Eulipotyphla"
        },
        {
          "id": "Hérisson",
          "name": "Hérisson",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Erinaceidae"
        },
        {
          "id": "Reptilia",
          "name": "Reptile",
          "taxon": "Classe",
          "classificationDepth": 3,
          "parent": "Vertebrata"
        },
        {
          "id": "Serpentes",
          "name": "Serpent",
          "taxon": "Sous-ordre",
          "classificationDepth": 5,
          "parent": "Squamata"
        },
        {
          "id": "Viperinae",
          "name": "Vipère",
          "taxon": "Sous-famille",
          "classificationDepth": 7,
          "parent": "Serpentes"
        },
        {
          "id": "Squamata",
          "name": "Squamates",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Reptilia"
        },
        {
          "id": "Podarcis muralis",
          "name": "Lézard des murailles",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Squamata"
        },
        {
          "id": "Testudines",
          "name": "Tortue",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Reptilia"
        },
        {
          "id": "Anguis fragilis",
          "name": "Orvet commun",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Squamata"
        },
        {
          "id": "Tortue d'Hermann",
          "name": "Tortue d'Hermann",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Testudines"
        },
        {
          "id": "Amphibia",
          "name": "Amphibien",
          "taxon": "Classe",
          "classificationDepth": 3,
          "parent": "Vertebrata"
        },
        {
          "id": "Anura",
          "name": "Anoures",
          "taxon": "Ordre",
          "classificationDepth": 4,
          "parent": "Amphibia"
        },
        {
          "id": "Ranidae",
          "name": "Ranidae",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Anura"
        },
        {
          "id": "Pelophylax kl. esculentus",
          "name": "Grenouille verte",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Ranidae"
        },
        {
          "id": "Bufonidae",
          "name": "Bufonidae",
          "taxon": "Famille",
          "classificationDepth": 6,
          "parent": "Anura"
        },
        {
          "id": "Bufo bufo",
          "name": "Crapaud commun",
          "taxon": "Espèce",
          "classificationDepth": 9,
          "parent": "Bufonidae"
        }
      ],
      "transform": [
        {
          "type": "stratify",
          "key": "id",
          "parentKey": "parent"
        },
        {
          "type": "tree",
          "method": {
            "signal": "layout"
          },
          "size": [
            {
              "signal": "width"
            },
            {
              "signal": "height"
            }
          ],
          "separation": {
            "signal": "separation"
          },
          "as": [
            "x",
            "y",
            "depth",
            "children"
          ]
        },
        {
          "type": "formula",
          "as": "y",
          "expr": "datum.classificationDepth * 80"
        }
      ]
    },
    {
      "name": "links",
      "source": "tree",
      "transform": [
        {
          "type": "treelinks"
        },
        {
          "type": "linkpath",
          "orient": "vertical",
          "shape": {
            "signal": "links"
          }
        }
      ]
    }
  ],
  "scales": [
    {
      "name": "color",
      "type": "ordinal",
      "range": {
        "scheme": "category10"
      },
      "domain": {
        "data": "tree",
        "field": "taxon"
      }
    }
  ],
  "marks": [
    {
      "type": "path",
      "from": {
        "data": "links"
      },
      "encode": {
        "update": {
          "path": {
            "field": "path"
          },
          "stroke": {
            "value": "#222"
          }
        }
      }
    },
    {
      "type": "symbol",
      "from": {
        "data": "tree"
      },
      "encode": {
        "enter": {
          "size": {
            "value": 400
          },
          "stroke": {
            "value": "#fff"
          }
        },
        "update": {
          "x": {
            "field": "x"
          },
          "y": {
            "field": "y"
          },
          "fill": {
            "scale": "color",
            "field": "taxon"
          }
        }
      }
    },
    {
      "type": "text",
      "from": {
        "data": "tree"
      },
      "encode": {
        "enter": {
          "text": {
            "field": "name"
          },
          "fontSize": {
            "value": 12
          },
          "baseline": {
            "value": "bottom"
          },
          "align": {
            "value": "center"
          }
        },
        "update": {
          "x": {
            "field": "x"
          },
          "y": {
            "field": "y"
          },
          "dx": {
            "signal": "datum.children ? -0 : -15"
          },
          "dy": {
            "signal": "datum.children ? -15 : 10"
          },
          "align": {
            "signal": "datum.children ? 'center' : 'right'"
          },
          "baseline": {
            "signal": "datum.children ? 'center' : 'bottom'"
          },
          "opacity": {
            "signal": "labels ? 1 : 0"
          },
          "angle": {
            "signal": "datum.children ? 0 : -55"
          }
        }
      }
    }
  ],
  "legends": [
    {
      "fill": "color",
      "title": "Classification",
      "orient": "top-left",
      "labelFontSize": 18,
      "labelLimit": 200,
      "symbolSize": 200,
      "titleFontSize": 24,
      "titleLimit": 200,
      "encode": {
        "symbols": {
          "enter": {
            "fillOpacity": {
              "value": 1
            }
          }
        },
        "labels": {
          "update": {
            "text": {
              "field": "value"
            }
          }
        }
      },
      "values": [
        "Règne",
        "Embranchement",
        "Sous-embranchement",
        "Classe",
        "Ordre",
        "Sous-ordre",
        "Famille",
        "Sous-famille",
        "Genre",
        "Espèce"
      ]
    }
  ]
}